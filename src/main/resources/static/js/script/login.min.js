let startTime=Date.now(),consent=!1;function consentUser(){consent=!0,$("#myModal").modal("hide")}function isNullOrEmpty(e){return null==e||"null"==e||void 0==e||"undefined"==e||""==(e+"").trim()}function flattenObject(e,r=""){let t={};for(let s in e)if(e.hasOwnProperty(s)){let a=e[s],i=r?`${r}.${s}`:s;a&&"object"==typeof a&&!Array.isArray(a)?Object.assign(t,flattenObject(a,i)):isNullOrEmpty(a)||(t[i]=a)}return t}function jsonToUrlSearchParams(e){let r=flattenObject(e),t=new URLSearchParams;for(let s in r)r.hasOwnProperty(s)&&t.append(s,r[s]);return t.toString()}function clearAll(){$("form").each(function(e,r){r.reset()}),$("form input:hidden:not(#myModal form input:hidden)").val(""),$("select.select2-hidden-accessible").val("").trigger("change")}function get(e,r){try{return e()}catch(t){return isNullOrEmpty(r)?"":r}}function validateInput(e){e.value=e.value.replace(/[^a-zA-Z0-9]/g,"")}String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(r,t){return void 0!==e[t]?e[t]:r})}),$(function(){$(".toggle-password").click(function(){$(this).toggleClass("fa-eye fa-eye-slash");var e=$(this).prev("input");"password"==e.attr("type")?e.attr("type","text"):e.attr("type","password")}),$("#login-form").validate({rules:{login:"required",password:"required"},messages:{login:resources.pleaseEnter.format(resources.usernameOrEmail),password:resources.pleaseEnter.format(resources.password)},highlight:function(e){$(e).addClass("is-invalid").closest("div").addClass("bad")},unhighlight:function(e){$(e).removeClass("is-invalid").closest("div").removeClass("bad")},errorElement:"span",errorClass:"invalid-feedback",errorPlacement:function(e,r){e.insertAfter(r)},submitHandler:function(e){if(!hcaptcha.getResponse()){alert("Please solve the captcha before submitting.");return}$(e).find("button:submit").attr("disabled","disabled"),e.submit()}}),$("#send_otp-form").validate({rules:{email:{required:!0,email:!0}},messages:{email:{required:resources.pleaseEnter.format(resources.email),email:resources.invalidFormat.format(resources.email)}},highlight:function(e){$(e).addClass("is-invalid").closest("div").addClass("bad")},unhighlight:function(e){$(e).removeClass("is-invalid").closest("div").removeClass("bad")},errorElement:"span",errorClass:"invalid-feedback",errorPlacement:function(e,r){e.insertAfter(r)},submitHandler:function(e){if(!hcaptcha.getResponse()){alert("Please solve the captcha before submitting.");return}$(e).find("button:submit").attr("disabled","disabled"),e.submit()}}),$("#register-form").validate({ignore:".skip",rules:{userName:"required",email:{required:!0,email:!0},firstName:"required",lastName:"required",countrySelect2:"required",password:{required:!0,minlength:5},repeatPassword:{required:!0,minlength:5,equalTo:"#password"}},messages:{userName:resources.pleaseEnter.format(resources.userName),email:{required:resources.pleaseEnter.format(resources.email),email:resources.invalidFormat.format(resources.email)},firstName:resources.pleaseEnter.format(resources.name),lastName:resources.pleaseEnter.format(resources.lastName),countrySelect2:resources.pleaseSelect.format(resources.country),password:{required:resources.pleaseEnter.format(resources.password),minlength:resources.mustBeMoreThan.format(resources.password,5,resources.character)},repeatPassword:{required:resources.pleaseEnter.format(resources.repeatPassword),minlength:resources.mustBeMoreThan.format(resources.password,5,resources.character),equalTo:resources.confirmPasswordDoesNotMach}},highlight:function(e){$(e).addClass("is-invalid").closest("div").addClass("bad")},unhighlight:function(e){$(e).removeClass("is-invalid").closest("div").removeClass("bad")},errorElement:"span",errorClass:"invalid-feedback",errorPlacement:function(e,r){r.hasClass("select2-hidden-accessible")?r.parent().append(e):e.insertAfter(r)},submitHandler:function(e){if(!hcaptcha.getResponse()){alert("Please solve the captcha before submitting.");return}if(!consent){$("#myModal").modal("show");return}$(e).find("button:submit").attr("disabled","disabled"),$.ajax({type:"POST",url:"/api/v1/user/register",dataType:"json",contentType:"application/json;charset=utf-8",data:JSON.stringify({country:{id:$("#countrySelect2").val()},userName:$("#userName").val(),email:$("#email").val(),password:$("#password").val(),firstName:$("#firstName").val(),lastName:$("#lastName").val(),referralCode:$("#referralCode").val()}),success:function(r){$(e).find("button:submit").removeAttr("disabled"),null==r.error?(clearAll(),new PNotify({title:"Success",text:"your information successfully registered.",type:"success",styling:"bootstrap3"}),window.location.href="#signin"):new PNotify({title:"Oh No!",text:r.error,type:"error",hide:!1,styling:"bootstrap3"})},error:function(r,t,s){$(e).find("button:submit").removeAttr("disabled"),new PNotify(isNullOrEmpty(get(()=>r.responseJSON))?{title:"Oh No!",text:"ajax answer post returned error: "+s.responseText,type:"error",hide:!1,styling:"bootstrap3"}:{title:"Oh No!",text:r.responseJSON.error+" ("+r.responseJSON.status+") <br>"+r.responseJSON.message,type:"error",hide:!1,styling:"bootstrap3"})}})}})}),$("#reset_pass-form").validate({ignore:".skip",rules:{login:"required",otp:"required",newPassword:{required:!0,minlength:5},repeatNewPassword:{required:!0,minlength:5,equalTo:"#newPassword"}},messages:{login:resources.pleaseEnter.format(resources.usernameOrEmail),otp:resources.pleaseEnter.format(resources.oneTimePassword),newPassword:{required:resources.pleaseEnter.format(resources.password),minlength:resources.mustBeMoreThan.format(resources.password,5,resources.character)},repeatNewPassword:{required:resources.pleaseEnter.format(resources.repeatPassword),minlength:resources.mustBeMoreThan.format(resources.password,5,resources.character),equalTo:resources.confirmPasswordDoesNotMach}},highlight:function(e){$(e).addClass("is-invalid").closest("div").addClass("bad")},unhighlight:function(e){$(e).removeClass("is-invalid").closest("div").removeClass("bad")},errorElement:"span",errorClass:"invalid-feedback",errorPlacement:function(e,r){r.hasClass("select2-hidden-accessible")?r.parent().append(e):e.insertAfter(r)},submitHandler:function(e){if(!hcaptcha.getResponse()){alert("Please solve the captcha before submitting.");return}$(e).find("button:submit").attr("disabled","disabled"),e.submit()}});