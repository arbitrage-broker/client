let hcaptchaInstances={},consent=!1;function onLoadCaptcha(){hcaptchaInstances.login=hcaptcha.render("login-captcha",{sitekey:"aa988f36-059e-4026-9d34-f68c0f4c7300"}),hcaptchaInstances.register=hcaptcha.render("register-captcha",{sitekey:"aa988f36-059e-4026-9d34-f68c0f4c7300"}),hcaptchaInstances.reset=hcaptcha.render("reset-captcha",{sitekey:"aa988f36-059e-4026-9d34-f68c0f4c7300"}),hcaptchaInstances.otp=hcaptcha.render("otp-captcha",{sitekey:"aa988f36-059e-4026-9d34-f68c0f4c7300"})}function consentUser(){consent=!0,$("#myModal").modal("hide")}function isNullOrEmpty(e){return null==e||"null"==e||void 0==e||"undefined"==e||""==(e+"").trim()}function flattenObject(e,t=""){let a={};for(let r in e)if(e.hasOwnProperty(r)){let s=e[r],n=t?`${t}.${r}`:r;s&&"object"==typeof s&&!Array.isArray(s)?Object.assign(a,flattenObject(s,n)):isNullOrEmpty(s)||(a[n]=s)}return a}function jsonToUrlSearchParams(e){let t=flattenObject(e),a=new URLSearchParams;for(let r in t)t.hasOwnProperty(r)&&a.append(r,t[r]);return a.toString()}function clearAll(){$("form").each(function(e,t){t.reset()}),$("form input:hidden:not(#myModal form input:hidden)").val(""),$("select.select2-hidden-accessible").val("").trigger("change")}function get(e,t){try{return e()}catch(a){return isNullOrEmpty(t)?"":t}}function validateInput(e){e.value=e.value.replace(/[^a-zA-Z0-9]/g,"")}String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,a){return void 0!==e[a]?e[a]:t})}),$(function(){$(".toggle-password").click(function(){$(this).toggleClass("fa-eye fa-eye-slash");var e=$(this).prev("input");"password"==e.attr("type")?e.attr("type","text"):e.attr("type","password")}),$("#login-form").validate({rules:{login:"required",password:"required"},messages:{login:resources.pleaseEnter.format(resources.usernameOrEmail),password:resources.pleaseEnter.format(resources.password)},highlight:function(e){$(e).addClass("is-invalid").closest("div").addClass("bad")},unhighlight:function(e){$(e).removeClass("is-invalid").closest("div").removeClass("bad")},errorElement:"span",errorClass:"invalid-feedback",errorPlacement:function(e,t){e.insertAfter(t)},submitHandler:function(e){if(!hcaptcha.getResponse(hcaptchaInstances.login)){alert("Please solve the captcha before submitting.");return}$(e).find("button:submit").attr("disabled","disabled"),e.submit()}}),$("#send_otp-form").validate({rules:{email:{required:!0,email:!0}},messages:{email:{required:resources.pleaseEnter.format(resources.email),email:resources.invalidFormat.format(resources.email)}},highlight:function(e){$(e).addClass("is-invalid").closest("div").addClass("bad")},unhighlight:function(e){$(e).removeClass("is-invalid").closest("div").removeClass("bad")},errorElement:"span",errorClass:"invalid-feedback",errorPlacement:function(e,t){e.insertAfter(t)},submitHandler:function(e){if(!hcaptcha.getResponse(hcaptchaInstances.otp)){alert("Please solve the captcha before submitting.");return}$(e).find("button:submit").attr("disabled","disabled"),e.submit()}}),$("#register-form").validate({ignore:".skip",rules:{userName:"required",email:{required:!0,email:!0},firstName:"required",lastName:"required",countrySelect2:"required",password:{required:!0,minlength:5},repeatPassword:{required:!0,minlength:5,equalTo:"#password"}},messages:{userName:resources.pleaseEnter.format(resources.userName),email:{required:resources.pleaseEnter.format(resources.email),email:resources.invalidFormat.format(resources.email)},firstName:resources.pleaseEnter.format(resources.name),lastName:resources.pleaseEnter.format(resources.lastName),countrySelect2:resources.pleaseSelect.format(resources.country),password:{required:resources.pleaseEnter.format(resources.password),minlength:resources.mustBeMoreThan.format(resources.password,5,resources.character)},repeatPassword:{required:resources.pleaseEnter.format(resources.repeatPassword),minlength:resources.mustBeMoreThan.format(resources.password,5,resources.character),equalTo:resources.confirmPasswordDoesNotMach}},highlight:function(e){$(e).addClass("is-invalid").closest("div").addClass("bad")},unhighlight:function(e){$(e).removeClass("is-invalid").closest("div").removeClass("bad")},errorElement:"span",errorClass:"invalid-feedback",errorPlacement:function(e,t){t.hasClass("select2-hidden-accessible")?t.parent().append(e):e.insertAfter(t)},submitHandler:function(e){if(!hcaptcha.getResponse(hcaptchaInstances.register)){alert("Please solve the captcha before submitting.");return}if(!consent){$("#myModal").modal("show");return}$(e).find("button:submit").attr("disabled","disabled"),$.ajax({type:"POST",url:"/api/v1/user/register",dataType:"json",contentType:"application/json;charset=utf-8",data:JSON.stringify({country:{id:$("#countrySelect2").val()},userName:$("#userName").val(),email:$("#email").val(),password:$("#password").val(),firstName:$("#firstName").val(),lastName:$("#lastName").val(),referralCode:$("#referralCode").val()}),success:function(t){$(e).find("button:submit").removeAttr("disabled"),null==t.error?(clearAll(),new PNotify({title:"Success",text:"your information successfully registered.",type:"success",styling:"bootstrap3"}),window.location.href="#signin"):new PNotify({title:"Oh No!",text:t.error,type:"error",hide:!1,styling:"bootstrap3"})},error:function(t,a,r){$(e).find("button:submit").removeAttr("disabled"),new PNotify(isNullOrEmpty(get(()=>t.responseJSON))?{title:"Oh No!",text:"ajax answer post returned error: "+r.responseText,type:"error",hide:!1,styling:"bootstrap3"}:{title:"Oh No!",text:t.responseJSON.error+" ("+t.responseJSON.status+") <br>"+t.responseJSON.message,type:"error",hide:!1,styling:"bootstrap3"})}})}})}),$("#reset_pass-form").validate({ignore:".skip",rules:{login:"required",otp:"required",newPassword:{required:!0,minlength:5},repeatNewPassword:{required:!0,minlength:5,equalTo:"#newPassword"}},messages:{login:resources.pleaseEnter.format(resources.usernameOrEmail),otp:resources.pleaseEnter.format(resources.oneTimePassword),newPassword:{required:resources.pleaseEnter.format(resources.password),minlength:resources.mustBeMoreThan.format(resources.password,5,resources.character)},repeatNewPassword:{required:resources.pleaseEnter.format(resources.repeatPassword),minlength:resources.mustBeMoreThan.format(resources.password,5,resources.character),equalTo:resources.confirmPasswordDoesNotMach}},highlight:function(e){$(e).addClass("is-invalid").closest("div").addClass("bad")},unhighlight:function(e){$(e).removeClass("is-invalid").closest("div").removeClass("bad")},errorElement:"span",errorClass:"invalid-feedback",errorPlacement:function(e,t){t.hasClass("select2-hidden-accessible")?t.parent().append(e):e.insertAfter(t)},submitHandler:function(e){if(!hcaptcha.getResponse(hcaptchaInstances.reset)){alert("Please solve the captcha before submitting.");return}$(e).find("button:submit").attr("disabled","disabled"),e.submit()}}),window.onload=onLoadCaptcha;